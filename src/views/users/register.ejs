<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/head', {title: 'Registrate'}) %>    <!--// Head //-->
    <body>
        
        <%- include('../partials/header') %>    <!--// Header //-->
        
        <main class="registermain">
            <div class="imageUs">
                <img src="/img/img_model_1.jpg" alt="imagen de una modelo" class="registerimage">
            </div>

            <section class= "formulariologin">
                <h1 class="h1-size">¡Registrate!</h1>

                <ul id="errors"></ul>

                <form action="/usuario/registro" method="POST" enctype="multipart/form-data">
                    <p><label for="first_name">Nombre : </label></p>
                    <p><input type="text" name="first_name" id="first_name" value="<%= typeof user == 'undefined' ? '' : user.first_name %>"></p>
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.first_name == 'undefined' ? '' : errors.first_name.msg %></p>
                    <span class='error-msg err-first_name'></span>

                    <p><label for="last_name">Apellido : </label></p>
                    <p><input type="text" name="last_name" id="last_name" value="<%= typeof user == 'undefined' ? '' : user.last_name %>"></p>
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.last_name == 'undefined' ? '' : errors.last_name.msg %></p>
                    <span class='error-msg err-last_name'></span>
                    
                    <p><label for="email">Email : </label></p>
                    <p><input type="email" name="email" id="email" placeholder="Ej: maria@babieka.com" value="<%= typeof user == 'undefined' ? '' : user.email %>"></p>
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.email == 'undefined' ? '' : errors.email.msg %></p>
                    <span class='error-msg err-email'></span>
                    
                    <p><label for="password">Contraseña : </label></p>
                    <p><input type="password" name="password" id="password"></p>
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.password == 'undefined' ? '' : errors.password.msg %></p>
                    <span class='error-msg err-pass'></span>
                    
                    <p><label for="repeatpassword">Repita su contraseña : </label></p>
                    <p><input type="password" name="repeatpassword" id="repeatpassword"></p>
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.repeatpassword == 'undefined' ? '' : errors.repeatpassword.msg %></p>
                   
                    <% if (loggedUser && loggedUser.role.name == 'admin') { %>
                        <label for="role">Rol : </label>    <!--// Role //-->
                        <select name="role">
                        <option value="" disabled selected>Seleciona...</option>
                        <% for (role of roles) { %>
                                <option value="<%= role.id %>"><%= role.name %></option>
                        <% } %>
                        </select>
                    <% } %>

                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.role == 'undefined' ? '' : errors.role.msg %></p>   
                    <p>    <!--// Imagen //-->
                        <input type="file" name="image" id="image" accept="image/png, .jpeg, .jpg, image/gif"> 
                        <input type="submit" value="Subir Imagen">  
                    </p>
                    <span class='error-msg err-image'></span> 
                    <p class="validationErrors"><%= typeof errors == 'undefined' ? '' : typeof errors.image == 'undefined' ? '' : errors.image.msg %></p>
                                    
    
                    <button type="submit" id="button">Crear cuenta</button>
                </form>
    
            </section>
    
        </main>
        
        <%- include('../partials/footer') %>    <!--// Footer //-->
        
        <script src="/js/validRegister.js" type="text/javascript"></script>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    </body>
</html>